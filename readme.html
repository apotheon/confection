
<h1>Confection</h1>

<p><a href="http://rubyworks.github.com/confection">Homepage</a> | <a
href="http://github.com/rubyworks/confection">Source Code</a> | <a
href="http://googlegroups.com/group/rubyworks-mailinglist">Mailing List</a></p>

<p><a href="http://travis-ci.org/rubyworks/confection"><img
src="http://travis-ci.org/rubyworks/confection.png" /></a></p>

<h2>Description</h2>

<p>Confection is multi-tenant configuration system for Ruby projects. If was 
designed to faciliate Ruby-based configuration for multiple tools in a
single file. If is extremely simple, which makes it easy to understand and
flexible in use.</p>

<h2>Synopsis</h2>

<p>Create a file in you project called `.co.rb`. In it, add configuration
blocks by name. As an example let’s demonstrate how we could use this for
Rake tasks.</p>

<pre>$ cat .co.rb
rake do
  desc 'generate yard docs'
  task :yard do
    sh 'yard'
  end
end</pre>

<p>In our Rakefile:</p>

<pre>$ cat Rakefile
require 'confection'
confection(:rake).call</pre>

<p>Now you might wonder why the heck you would do this. That’s where the</p>

<pre>*multi-tenancy* comes into play. Let's add another configuration. This time</pre>

<p>for a tool that has native support for Confection.</p>

<pre>$ cat .co.rb
TITLE = &quot;myapp&quot;

rake do
  desc 'generate yard docs'
  task :yard do
    sh &quot;yard doc --title #{TITLE}&quot;
  end
end

qed do |config|
  config.title = &quot;#{TITLE} Demonstrandum&quot;
end</pre>

<p>Now we have configuration for both the rake tool and the qed test tool in a
single file. Thus we gain the advantage of reducing the file count of our 
project while pulling our project configuration together into one place.
Moreover, these configurations can potentially share settings as
demonstrated here via the `TITLE` constant.</p>

<p>Using Confection in your libraries is very simele. As you can see from our
example Rakefile the #confection method is used to get a handle on a name
configuration. With it you have two options, `#call` or `#exec`. The first
evaluates the configuration block at the toplevel, while the later
evaluates the block in the context of the caller.</p>

<h2>Release Notes</h2>

<p>Please see HISTORY.rdoc file.</p>

<h2>Copyrights</h2>

<p>Copyright © 2011 Rubyworks</p>

<p>Confection is distributable in accordance with the terms of the
BSD-2-Clause license.</p>

<p>See COPYING.rdoc for detiails.</p>
